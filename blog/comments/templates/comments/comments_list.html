{% load static %}
{% load martortags %}

{% block css %}
    <link href="{% static 'plugins/css/ace.min.css' %}" type="text/css" media="all" rel="stylesheet" />
{% endblock %}

{% block js %}
    <script type="text/javascript" src="{% static 'plugins/js/highlight.min.js' %}" async></script>
    <script>
        $('.martor-preview pre').each(function(i, block){
            hljs.highlightBlock(block);
        });
    </script>
{% endblock %}

{% for comment in comments%}
<div style="border-top: chocolate 2px solid; padding: 15px;">
    <div style="display: flex; justify-content: space-between;">
        {% include "accounts/nametag.html" with account=comment.user.account %}
        
        <div style="display: flex; align-items: flex-start;">
            {{ comment.timestamp|date:"Y.m.d H:i" }}
        </div>
    </div>

    <div class="martor-preview">
        <p>{{ comment.content|safe_markdown }}</p>
    </div>

    {% if comment.user.username == request.user.username %}
        <div style="display: flex; justify-content: flex-end;">
            <a class="small" href="{{ comment.get_delete_url }}">Delete</a>
        </div>
    {% endif %}
    
</div>
{% endfor %}